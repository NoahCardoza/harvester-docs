<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.78.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Opening The Browser #  This guide shows you how to launch a browser instance after getting an intercepter
instance back from harvester.capture.
Quick Recap #  We&rsquo;ll be using a ReCaptchaV2 in this example, but you are able to pass any of the
captcha configs and the browser API will work in the exact same way.
from harvester import Harvester, ReCaptchaV2 captcha = ReCaptchaV2( url=&#39;www.supremenewyork.com&#39;, sitekey=&#39;6LeWwRkUAAAAAOBsau7KpuC9AV-6J8mhw4AjC3Xz&#39; ) harvester = Harvester().">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="3 Opening The Browser" />
<meta property="og:description" content="Opening The Browser #  This guide shows you how to launch a browser instance after getting an intercepter
instance back from harvester.capture.
Quick Recap #  We&rsquo;ll be using a ReCaptchaV2 in this example, but you are able to pass any of the
captcha configs and the browser API will work in the exact same way.
from harvester import Harvester, ReCaptchaV2 captcha = ReCaptchaV2( url=&#39;www.supremenewyork.com&#39;, sitekey=&#39;6LeWwRkUAAAAAOBsau7KpuC9AV-6J8mhw4AjC3Xz&#39; ) harvester = Harvester()." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/opening-the-browser/" />

<title>3 Opening The Browser | Harvester</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.0f40b4e83b0db00d11c595295e7f5f85f51436d20a5b6790534cb30c9f46a201.css" integrity="sha256-D0C06DsNsA0RxZUpXn9fhfUUNtIKW2eQU0yzDJ9GogE=">
<script defer src="/en.search.min.171dee3f9bb72ff226ebf5192db82b073f33b882cd20ad7c100e8c31bd685566.js" integrity="sha256-Fx3uP5u3L/Im6/UZLbgrBz8zuILNIK18EA6MMb1oVWY="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Harvester</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/unlocking-the-harvester/" class="">1 Unlocking The Harvester</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <span>2 Supported Captchas</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/2-supported-captchas/recaptcha-v2-example/" class="">1 ReCaptcha v2 Example</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/2-supported-captchas/recaptcha-v3-example/" class="">2 ReCaptcha v3 Example</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/2-supported-captchas/hcaptcha-example/" class="">3 hCaptcha Example</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/opening-the-browser/" class=" active">3 Opening The Browser</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/accessing-the-tokens/" class="">4 Accessing The Tokens</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/5-api-documentation/" class="">5 API Documentation</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>3 Opening The Browser</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#quick-recap">Quick Recap</a></li>
    <li><a href="#a-simple-example">A Simple Example</a></li>
    <li><a href="#loops-for-the-win">Loops For The Win</a></li>
    <li><a href="#using-proxies">Using Proxies</a>
      <ul>
        <li><a href="#authenicated-proxies">Authenicated Proxies</a></li>
        <li><a href="#setting-the-proxy">Setting The Proxy</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="opening-the-browser">
  Opening The Browser
  <a class="anchor" href="#opening-the-browser">#</a>
</h1>
<p>This guide shows you how to launch a browser instance after getting an intercepter<br>
instance back from <code>harvester.capture</code>.</p>
<!-- **NOTE**: This example assumes you have already unlocked the harvester. For more information
on that see [here](/docs/unlocking-the-harvester) -->
<h2 id="quick-recap">
  Quick Recap
  <a class="anchor" href="#quick-recap">#</a>
</h2>
<p>We&rsquo;ll be using a <code>ReCaptchaV2</code> in this example, but you are able to pass any of the<br>
captcha configs and the browser API will work in the exact same way.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">from</span> harvester <span style="color:#f92672">import</span> Harvester, ReCaptchaV2

captcha <span style="color:#f92672">=</span> ReCaptchaV2(
    url<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;www.supremenewyork.com&#39;</span>,
    sitekey<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;6LeWwRkUAAAAAOBsau7KpuC9AV-6J8mhw4AjC3Xz&#39;</span>
)

harvester <span style="color:#f92672">=</span> Harvester()<span style="color:#f92672">.</span>serveforever()
intercepter <span style="color:#f92672">=</span> harvester<span style="color:#f92672">.</span>capture(captcha)
</code></pre></div><p>You&rsquo;ll probaby recognize the code above as being pulled straight from the <a href="/docs/recaptcha-v2-example/">ReCaptcha V2 Example</a>!</p>
<p>Now lets get to setting up the browser.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">browser <span style="color:#f92672">=</span> intercepter<span style="color:#f92672">.</span>setup_browser(user_data_dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ChromeData&#39;</span>)
</code></pre></div><p>The code above will return a new <code>Browser</code> instance. Keep in mind that calling<br>
<code>setup_browser</code> again will return the same instance it returned the first time.<br>
This might change in the future.</p>
<p>The <code>user_data_dir</code> can be a path to an existing <code>user-data-dir</code>, or it can be to<br>
a folder than doesn&rsquo;t exist yet, in which case the folder will be created. Make<br>
sure any parent folders have already been created though.</p>
<p>Now we&rsquo;ll have to get access to a <code>Profile</code> object to actually lauch a window.</p>
<h2 id="a-simple-example">
  A Simple Example
  <a class="anchor" href="#a-simple-example">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#75715e"># check to see if any profiles exist already</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> browser<span style="color:#f92672">.</span>get_profiles():
    <span style="color:#75715e"># create a new profile</span>
    profile <span style="color:#f92672">=</span> browser<span style="color:#f92672">.</span>new_profile(<span style="color:#e6db74">&#39;Foo&#39;</span>)
    <span style="color:#75715e"># this will open a window which allows the user to login to google</span>
    <span style="color:#75715e"># it will block until the user close the browser, browser, not the window</span>
    profile<span style="color:#f92672">.</span>login_to_google()
<span style="color:#66d9ef">else</span>:
    <span style="color:#75715e"># load the profile that should exist after running the code a second time</span>
    profile <span style="color:#f92672">=</span> browser<span style="color:#f92672">.</span>get_profile(<span style="color:#e6db74">&#39;Foo&#39;</span>)

<span style="color:#75715e"># this will create a window which will connect to the server</span>
<span style="color:#75715e"># and display captcha&#39;s to the user when they are requested</span>
<span style="color:#75715e"># later in in the code</span>
profile<span style="color:#f92672">.</span>harvest()
</code></pre></div><h2 id="loops-for-the-win">
  Loops For The Win
  <a class="anchor" href="#loops-for-the-win">#</a>
</h2>
<p>Using the power of the for loop, we&rsquo;ll initiate a couple of profiles, log them<br>
into Google, and then open them to start harvesting ReCaptcha v2 tokens.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#75715e"># check to see if any profiles exist already</span>
existing_profiles <span style="color:#f92672">=</span> len(browser<span style="color:#f92672">.</span>get_profiles())
<span style="color:#66d9ef">if</span> existing_profiles <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">6</span>:
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(existing_profiles <span style="color:#f92672">-</span> <span style="color:#ae81ff">6</span>):
        profile <span style="color:#f92672">=</span> browser<span style="color:#f92672">.</span>new_profile(f<span style="color:#e6db74">&#39;Foo-{i}&#39;</span>)
        profile<span style="color:#f92672">.</span>login_to_google()

<span style="color:#66d9ef">for</span> profile <span style="color:#f92672">in</span> browser<span style="color:#f92672">.</span>get_profiles():
    profile<span style="color:#f92672">.</span>harvest()
</code></pre></div><p>The code above will open at least 6 windows unless more than 6 profiles<br>
already existed before running the code.</p>
<h2 id="using-proxies">
  Using Proxies
  <a class="anchor" href="#using-proxies">#</a>
</h2>
<p>To setup a proxy all you need to do is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">from</span> harvester <span style="color:#f92672">import</span> Proxy

proxy <span style="color:#f92672">=</span> Proxy(
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;127.0.0.1,</span>
    port<span style="color:#f92672">=</span><span style="color:#ae81ff">9487</span>
)
</code></pre></div><h3 id="authenicated-proxies">
  Authenicated Proxies
  <a class="anchor" href="#authenicated-proxies">#</a>
</h3>
<p>To use authenicated proxies, all you need to do is<br>
pass a username and password like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">proxy <span style="color:#f92672">=</span> Proxy(
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;127.0.0.1,</span>
    port<span style="color:#f92672">=</span><span style="color:#ae81ff">9487</span>,
    username<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;foo&#39;</span>,
    password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bar&#39;</span>
)
</code></pre></div><h3 id="setting-the-proxy">
  Setting The Proxy
  <a class="anchor" href="#setting-the-proxy">#</a>
</h3>
<p>To actually set a proxy in a profile, all you need to do is call<br>
<code>.set_proxy</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">proxy <span style="color:#f92672">=</span> Proxy(
    host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;127.0.0.1,</span>
    port<span style="color:#f92672">=</span><span style="color:#ae81ff">9487</span>
)

<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> browser<span style="color:#f92672">.</span>get_profiles():
    profile <span style="color:#f92672">=</span> browser<span style="color:#f92672">.</span>new_profile(<span style="color:#e6db74">&#39;Foo&#39;</span>)
    profile<span style="color:#f92672">.</span>set_proxy(proxy) <span style="color:#75715e"># from now on all requests will be proxied</span>
    profile<span style="color:#f92672">.</span>login_to_google()
<span style="color:#66d9ef">else</span>:
    <span style="color:#75715e"># set proxy is setup for chaining so you can use it like this too</span>
    profile <span style="color:#f92672">=</span> browser<span style="color:#f92672">.</span>get_profile(<span style="color:#e6db74">&#39;Foo&#39;</span>)<span style="color:#f92672">.</span>set_proxy(proxy)

profile<span style="color:#f92672">.</span>harvest()
</code></pre></div><p>Finally, we are ready to <a href="/docs/accessing-the-tokens">access the tokens</a>!</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#quick-recap">Quick Recap</a></li>
    <li><a href="#a-simple-example">A Simple Example</a></li>
    <li><a href="#loops-for-the-win">Loops For The Win</a></li>
    <li><a href="#using-proxies">Using Proxies</a>
      <ul>
        <li><a href="#authenicated-proxies">Authenicated Proxies</a></li>
        <li><a href="#setting-the-proxy">Setting The Proxy</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












